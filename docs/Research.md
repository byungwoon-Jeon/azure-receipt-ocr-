Azure Form Recognizer 영수증 모델 활용 조사 보고

1. Azure 영수증 모델 API 호출에 필요한 정보와 절차

Azure Form Recognizer(문서 지능) 서비스를 사용하려면 먼저 Azure 포털에서 Form Recognizer 리소스를 만들고 해당 **엔드포인트(URL)**와 API 키를 확보해야 한다 ￼. 엔드포인트는 지역에 따라 달라지며, 예를 들어 <리소스이름>.cognitiveservices.azure.com 형식으로 제공된다. API 호출 시에는 이 엔드포인트와 영수증 모델 API 경로를 조합하여 HTTP POST 요청을 보낸다. 예를 들어 v2.1 버전의 영수증 모델은 다음과 같은 경로를 사용한다: POST {endpoint}/formrecognizer/v2.1/prebuilt/receipt/analyze ￼. 이 때 요청 헤더에 구독 키를 포함해야 하는데, 헤더 이름은 Ocp-Apim-Subscription-Key이며 값으로 해당 리소스의 키를 넣는다 ￼.

요청 본문에는 분석할 영수증 이미지나 PDF 데이터를 포함하며, application/pdf, image/jpeg, image/png 등 지원되는 파일 형식을 사용할 수 있다 ￼. 또는 JSON 요청으로 이미지 URL을 제공할 수도 있다 ￼. 영수증 모델 API에 요청을 보내면 서버는 즉시 결과를 반환하지 않고 비동기 처리를 수행한다. 초기 응답으로 202 Accepted가 반환되며, 응답 헤더의 Operation-Location 값으로 결과 조회 URL이 제공된다 ￼. 클라이언트는 이 URL을 통해 일정 시간 간격으로 결과를 조회(polling)하여 분석 완료 여부를 확인하고, 최종적으로 **영수증의 인식 결과(JSON)**를 얻는다 ￼. 이 JSON에는 인식된 텍스트와 추출된 필드명이 구조화되어 담겨온다.

요약: 엔드포인트 URL과 API Key를 준비하고, 영수증 모델의 분석 API 경로로 POST 요청을 보낸다. 요청 헤더에 키를 넣고, 본문에 이미지/PDF 데이터를 전달한다. 호출 후 반환된 Operation-Location URL로 결과를 조회하는 절차로 진행된다 ￼ ￼.

2. 한국 지역에서 서비스가 불가능한 경우의 대안 지역 및 고려사항

Azure Form Recognizer 서비스는 전 세계 여러 **리전(region)**에서 제공되며 한국 데이터센터(예: Korea Central, Korea South)에서도 사용할 수 있다 ￼. 그러나 만약 특정 시점에 한국 지역에서 해당 모델 사용이 불가능하거나 지원되지 않는 경우, 지리적으로 가장 가까운 인접 리전을 선택하여 리소스를 생성하고 사용해야 한다. 한국과 가까운 Azure 리전으로는 **일본 동부(Japan East)**나 동아시아(East Asia, 홍콩), 동남아시아(Southeast Asia, 싱가포르) 등이 있으며, 이러한 지역에는 Form Recognizer 영수증 모델이 지원된다 ￼. 가까운 리전을 선택하면 네트워크 **레이턴시(지연 시간)**를 최소화하여 비교적 빠른 응답 속도를 기대할 수 있다. 예를 들어, 서울에서 일본 도쿄 리전(Japan East)으로 요청을 보내는 경우 수십 밀리초 수준의 추가 지연이 발생할 수 있으며, 싱가포르(Southeast Asia) 등 다소 먼 지역일수록 지연이 더 커질 수 있다.

또한 지역 선택에 따른 비용 고려사항으로는, 지역마다 Azure 서비스 가격에 약간의 차이가 있을 수 있으므로 이용하려는 리전의 Form Recognizer 가격을 확인해야 한다. 다만 인텔리전스 서비스의 단가는 지역 간 큰 차이가 없으며, 한국 지역에서 사용이 불가하여 인접 지역을 쓸 경우에도 페이지당 분석 비용은 유사한 수준이다. 대신 데이터가 국외 리전을 오갈 경우 네트워크 대역폭 비용(egress 비용)이 발생할 수 있다는 점을 유의해야 한다. 아울러 기업 정책상 데이터 주권이나 컴플라이언스 요건이 있다면, 영수증 이미지와 결과 데이터가 다른 나라 리전에 저장·처리되는 점도 고려해야 한다. 정리하면, 한국 리전에서 지원되지 않을 시 일본 등 가까운 리전을 선택하고, 이로 인한 약간의 지연 시간 증가와 잠재적인 네트워크 비용을 감안하여 설계해야 한다 ￼.

3. 영수증 모델의 다국어 인식 지원

Azure Form Recognizer의 영수증 모델은 단일 모델로 여러 언어의 영수증을 처리할 수 있도록 설계되어 있다. 별도로 언어마다 다른 모델을 만들 필요 없이, 한 번의 호출로 다양한 언어의 텍스트를 인식한다. 이는 폼 인식기의 기본 OCR 엔진인 프리빌트 Read 모델이 다국어를 자동 감지하고 처리하기 때문이다 ￼. Microsoft 공식 문서에 따르면 특별히 언어 코드를 지정하지 않아도 딥러닝 기반 모델이 문서의 언어를 자동으로 판별하여 모든 텍스트를 추출하며, 하나의 문서에 여러 언어가 혼재되어 있어도 모두 인식해낸다 ￼. 사용자가 확실하게 언어를 알고 있는 경우가 아니면 굳이 locale 매개변수를 지정할 필요가 없을 정도로 자동 언어 인식이 지원된다 ￼.

영수증 모델이 인식할 수 있는 언어의 범위는 매우 넓다. OCR 관점에서 100여 개 이상의 언어를 지원하며 ￼ ￼, 여기에는 한국어, 영어, 일본어, 중국어(간체/번체), 말레이시아어 등도 포함된다. 예를 들어 Microsoft 문서의 지원 언어 목록을 보면 Korean(ko), Japanese(ja), Malay(ms) 등이 명시되어 있어 다양한 언어의 영수증 텍스트를 인식 가능함을 알 수 있다 ￼ ￼. 실제로 한국어로 된 영수증이나 일본어/중국어 영수증도 OCR 단계에서 글자가 추출되며, 금액이나 날짜 등의 숫자도 인식된다.

다만 필드 추출 측면에서 살펴보면, 현재 영수증 모델이 가장 최적화된 언어는 일부 주요 언어인 것으로 나타난다. 공식 문서에 따르면 영수증 모델은 **영어(미국, 영국 등)**을 기본으로 하며, 그 외에도 프랑스어, 독일어, 이탈리아어, 일본어, 포르투갈어, 스페인어 등에 대해서 필드 인식이 가능하다고 언급된다 ￼. 이러한 언어들은 영수증 양식에서 상호 공통된 필드명(예: TOTAL, Tax 등 해당 언어의 용어)을 학습한 상태이므로, 해당 언어 영수증에서는 상호작용 필드 추출 정확도가 높다. 반면 한국어, 중국어 등은 위 목록에 명시적으로 포함되어 있지 않은데, 이는 해당 언어 영수증의 필드 레이블(예: “총액”, “합계”, “세액” 등의 표현)에 대한 학습이 제한적일 수 있음을 의미한다. 그러나 지원 언어 목록에 한국어와 중국어도 포함되므로 ￼, 비록 완벽히 최적화되지는 않았더라도 한글 영수증이나 중국어 영수증도 어느 정도 처리가 가능하다. 실제로 영수증 모델은 언어를 가리지 않고 모든 텍스트를 추출하며, 표준적인 영수증 형식에서는 총액, 날짜 등을 위치나 패턴을 기반으로 식별하려 시도한다. 결론적으로, 하나의 영수증 모델로 다국어 영수증을 자동 인식할 수 있으며, 별도의 언어별 모델 분리는 필요 없다 ￼. 다만 언어에 따른 정확도의 차이는 있을 수 있으므로, 한국어/중국어 등 비서구권 언어 영수증의 경우 추출된 결과를 추가로 검증하거나 필요하면 커스텀 모델로 개선하는 것이 권장된다.

4. Azure 영수증 모델이 기본적으로 추출하는 필드 목록

Azure Form Recognizer의 영수증 모델은 영수증에서 흔히 나타나는 주요 정보를 정형화된 필드 형태로 추출해준다. 기본 필드 목록은 다음과 같다 ￼ ￼:
	•	ReceiptType: 영수증 종류를 나타내는 필드로, 식사(Meal), 물품(Supplies), 호텔(Hotel), 교통(Transportation) 등으로 영수증의 분류를 식별한다 ￼. (예: 식당 영수증인지 주유 영수증인지 등)
	•	MerchantName: 상호명 또는 가맹점 이름. 영수증을 발행한 판매처의 이름을 인식함 ￼.
	•	MerchantPhoneNumber: 가맹점의 전화번호 ￼. 영수증에 인쇄된 업소 연락처가 있는 경우 추출.
	•	MerchantAddress: 가맹점 주소 ￼. 영수증에 기재된 주소를 식별함.
	•	TransactionDate: 거래 날짜 ￼. 영수증 발행 일자를 yyyy-mm-dd 형식 등으로 반환.
	•	TransactionTime: 거래 시간 ￼. 영수증 발행 시각을 HH:mm:ss (24시간 기준) 등으로 반환.
	•	Subtotal: 소계 금액. 세금 등이 추가되기 전 합계 금액(품목 총액)을 의미하며, 두 자리 소수(float) 값으로 출력됨 ￼.
	•	Tax (또는 TotalTax): 세금 합계 금액. 영수증에서 부가세 등 세금의 총액을 추출한 값으로, 2022년 이후 버전에서는 필드명이 TotalTax로 변경되었다 ￼. 값은 소숫점 두 자리까지의 부동소수(float)로 표현됨.
	•	Tip: 팁 금액. 고객이 추가로 지불한 팁이 기재된 경우 그 금액을 추출 (없으면 빈 값) ￼.
	•	Total: 총 거래 금액. 영수증의 최종 결제금액으로, 모든 세금과 팁이 포함된 총액을 두 자리 소수로 반환한다 ￼.
	•	Items: 품목 리스트 배열. 영수증에 여러 상품 또는 서비스 항목이 있는 경우 각 행별로 정보를 구조화하여 제공한다 ￼. 각 아이템 객체에는 다음과 같은 하위 필드가 있다:
	•	Description (또는 Name): 품목 이름/설명 ￼. 해당 항목의 명칭을 나타내며, 2022-06 버전 이전에는 Name으로 불리다가 이후 Description으로 명명됨.
	•	Quantity: 수량 ￼. 구매한 개수 또는 수량을 두 자리 소수로 표시.
	•	Price: 단가 ￼. 개당 가격 (또는 단위당 가격)을 두 자리 소수로 표시.
	•	TotalPrice: 총 가격 ￼. 해당 품목 라인의 합계 금액 (Price * Quantity)을 두 자리 소수로 나타낸 값.

以上의 필드들은 영수증 모델 호출 시 JSON 결과의 필드 이름으로 제공되며, 각각 confidence(신뢰도) 점수와 함께 추출된다. 예를 들어, 영수증에서 상호와 총액, 날짜 등이 자동으로 인식되어 MerchantName, Total, TransactionDate 등의 키로 결과 JSON에 포함된다 ￼.

참고: 20232024년에 발표된 **v3.0v4.0 버전**의 영수증 모델에서는 기능이 확대되어, 호텔 영수증의 VAT 테이블 추출, 영수증 국가/지역 코드(CountryRegion) 식별 등이 추가되었다 ￼. 또한 ReceiptType 필드가 도입되어 영수증의 유형을 분류해주며, TaxDetails라는 하위 구조로 세금 내역(순금액, 세율, 설명 등)을 추출할 수 있다 ￼. 기본적으로 영수증 모델은 날짜, 금액 같이 범용적인 필드를 모두 커버하지만, 도메인 특화 영수증(예: 주유소 영수증의 리터 단가 등)에서 추가 정보를 원한다면 다음 절의 커스텀 모델 방법을 고려할 수 있다.

5. 추가 필드 추출을 위한 커스텀 모델 확장

영수증 모델이 제공하는 기본 필드 이외에 특정한 추가 필드(예: 카드 승인번호, 결제 수단, 고객 번호 등)를 추출해야 하는 경우, 커스텀 모델을 훈련시켜 기능을 확장할 수 있다. Azure Form Recognizer는 사용자가 자신의 문서에 맞게 모델을 훈련시킬 수 있는 Custom model 기능을 제공한다 ￼. 기본 제공 영수증 모델의 스키마를 직접 변경할 수는 없지만, 사용자 레이블링을 통한 학습으로 원하는 필드를 추출하는 별도 모델을 만들 수 있다. 예를 들어 영수증에서 신용카드 카드번호를 추출하고자 할 때, 해당 필드를 학습한 커스텀 모델을 만들어서 해결할 수 있다.

커스텀 모델 훈련 절차: 먼저 일정량의 훈련 데이터(영수증 이미지/PDF 샘플)를 준비한다. 권장 최소 수는 5장 이상이며, 데이터가 많을수록 정확도가 향상된다 ￼. Azure에서 제공하는 라벨링 도구(Form Recognizer Sample Labeling Tool 또는 Document Intelligence Studio의 프로젝트 기능)를 이용해 각 영수증에서 추출하길 원하는 필드에 레이블을 지정한다 ￼. 레이블링 도구는 웹 인터페이스로 제공되며, 사용자는 업로드한 영수증 이미지 위에 영역을 선택하거나 OCR 텍스트를 클릭하여 필드 값을 지정할 수 있다. 이 때 필드 이름으로 “CardNumber”, “MembershipID” 등의 임의의 새 필드를 정의하고 해당 값에 레이블을 붙이는 방식이다. 이렇게 수개의 영수증에 대해 모든 필요한 추가 필드를 사람이 지정해주면, 그 레이블 정보와 이미지를 바탕으로 Azure가 머신러닝 모델 훈련을 진행한다 ￼. 훈련은 Azure Portal의 Form Recognizer Studio UI나 REST API/SDK를 통해 수행할 수 있으며, 완료 시 커스텀 모델 ID가 발급된다.

훈련된 커스텀 모델은 추론 시 전용 엔드포인트로 사용할 수 있다. 예를 들어, 커스텀 모델 ID가 mysamplemodel이라면 API 호출 시 POST {endpoint}/formrecognizer/documentModels/mysamplemodel:analyze 와 같이 요청하여 새 모델을 통해 분석을 수행하게 된다. 응답 형식은 기본 모델과 유사하게 JSON으로 나오며, 이 때는 우리가 정의한 커스텀 필드명(예: CardNumber)이 키로 포함된 결과를 얻을 수 있다. 요컨대, 커스텀 모델을 통해 영수증 모델이 기본적으로 제공하지 않는 필드도 추출 가능하도록 확장할 수 있다 ￼.

Azure의 커스텀 모델 훈련은 레이블 유무에 따라 두 가지 방식을 지원한다: 라벨이 있는 학습(supervised)과 라벨 없이 구조만 학습(unsupervised). 추가 필드를 뽑아내려면 일반적으로 레이블링이 필수이므로, 앞서 설명한 대로 사용자가 일일이 해당 필드를 표시하는 과정을 거쳐 유관된 데이터 패턴을 학습시키게 된다 ￼. 훈련된 모델은 Form Recognizer 리소스에 등록되어 관리되며, 필요에 따라 기존 모델들을 **구성(Compose)**하여 하나의 엔드포인트로 통합하는 것도 가능하다 (예를 들어 여러 양식 타입별 모델을 하나로 묶는 기능).

마지막으로, 레이블링 도구는 웹 브라우저에서 사용할 수 있는 Azure 제공 도구로, 별도의 설치 없이 Azure Portal의 Form Recognizer(또는 Document Intelligence) Studio에서 “프로젝트 생성 -> 레이블링” 과정을 통해 접근할 수 있다. 또는 GitHub의 오픈소스 Sample Labeling Tool을 직접 배포하여 사용할 수도 있다 ￼. 이 도구를 사용하면 PDF나 이미지 상의 텍스트를 클릭하여 필드로 지정할 수 있고, JSON 형태의 Label 파일이 자동으로 생성되어 향후 학습에 활용된다.

요약: 영수증 모델의 기본 출력에 없는 필드를 얻고 싶다면, 사용자 커스텀 모델을 훈련하면 된다. Azure Form Recognizer Studio의 레이블링 기능으로 추가 필드를 지정한 뒤, 최소 5장 이상의 샘플로 모델을 학습시킨다 ￼. 그렇게 만든 커스텀 모델을 API로 호출하면 우리가 정의한 새 필드들도 추출할 수 있으며, 이를 통해 영수증 데이터 추출 범위를 유연하게 확장할 수 있다 ￼.

⸻

참고 자료: Microsoft Learn 공식 문서 및 Azure Docs 내용을 참조하여 작성하였으며, 각 항목별로 해당 출처를 하이퍼링크로 명시하였다. Azure Form Recognizer(문서 지능) 서비스의 최신 사양과 지역/언어 지원 정보는 2025년 기준 Microsoft Docs에 기반함을 밝힌다.
